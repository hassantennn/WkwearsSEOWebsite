import{w as q}from"./with-props-Bw4uH2vI.js";import{j as t}from"./jsx-runtime-BJrenFx_.js";import{r as u,i as W,L as B,u as J}from"./chunk-D4RADZKF-Dyetzg4o.js";import{j as D,q as Q,s as Y}from"./index-DJMoeawr.js";import{u as Z,P as ee}from"./ProductPrice-bqsdTYHv.js";import{M as te,i as ne,u as H,P as se,a as re,b as ie,L as oe,m as I}from"./proxy-C5qGJ0t0.js";import{I as M}from"./Image-B_TZjruE.js";import"./Money-APOJR4kl.js";const L=",",E={OPTION:":",END_OF_PREFIX:",",SEQUENCE_GAP:" ",RANGE:"-"},z=(()=>{const e=new Map;return function(s,r){var n;if(s.length===0)return!1;if(!e.has(r)){const l=new Set;for(const i of ae(r)){l.add(i.join(L));for(let a=0;a<i.length;a++)l.add(i.slice(0,a+1).join(L))}e.set(r,l)}return!!((n=e.get(r))!=null&&n.has(s.join(L)))}})();function ae(e){if(!e)return[];if(e.startsWith("v1_"))return ce(le(e));throw new Error("Unsupported option value encoding")}const le=e=>e.replace(/^v1_/,"");function ce(e){const s=/[ :,-]/g;let r=0,n;const l=[],i=[];let a=0,o=null;for(;n=s.exec(e);){const c=n[0],f=Number.parseInt(e.slice(r,n.index))||0;if(o!==null){for(;o<f;o++)i[a]=o,l.push([...i]);o=null}i[a]=f,c===E.RANGE?o=f:c===E.OPTION?a++:((c===E.SEQUENCE_GAP||c===E.END_OF_PREFIX&&e[n.index-1]!==E.END_OF_PREFIX)&&l.push([...i]),c===E.END_OF_PREFIX&&(i.pop(),a--)),r=s.lastIndex}const d=e.match(/\d+$/g);if(d){const c=parseInt(d[0]);if(o!=null)for(;o<=c;o++)i[a]=o,l.push([...i]);else l.push([c])}return l}function de(e){return Object.assign({},...e.map(s=>({[s.name]:Object.assign({},...s!=null&&s.optionValues?s.optionValues.map((r,n)=>({[r.name]:n})):[])})))}function _(e){return Object.assign({},...e.map(s=>({[s.name]:s.value})))}function $(e){return JSON.stringify(_(e))}function X(e){return Array.isArray(e)?JSON.stringify(Object.assign({},...e.map(s=>({[s.name]:s.value})))):JSON.stringify(e)}function ue(e,s){return Object.keys(e).map(n=>s[n]?s[n][e[n]]:null).filter(n=>n!==null)}function pe(e){return Object.assign({},...e.map(s=>({[X(s.selectedOptions||[])]:s})))}const U=["options","selectedOrFirstAvailableVariant","adjacentVariants"],fe=["handle","encodedVariantExistence","encodedVariantAvailability"];function O(e){return console.error(`[h2:error:getProductOptions] product.${e} is missing. Make sure you query for this field from the Storefront API.`),!1}function G(e,s=!1){var r;let n=!0;const l=Object.keys(e);if((s?[...U,...fe]:U).forEach(i=>{l.includes(i)||(n=O(i))}),e.options){const i=e==null?void 0:e.options[0];if(s&&!(i!=null&&i.name)&&(n=O("options.name")),(r=e==null?void 0:e.options[0])!=null&&r.optionValues){let a=e.options[0].optionValues[0];s&&!(a!=null&&a.name)&&(n=O("options.optionValues.name")),a=e.options[0].optionValues.filter(o=>!!(o!=null&&o.firstSelectableVariant))[0],a!=null&&a.firstSelectableVariant&&(n=T(a.firstSelectableVariant,"options.optionValues.firstSelectableVariant",n,s))}else n=O("options.optionValues")}return e.selectedOrFirstAvailableVariant&&(n=T(e.selectedOrFirstAvailableVariant,"selectedOrFirstAvailableVariant",n,s)),e.adjacentVariants&&e.adjacentVariants[0]&&(n=T(e.adjacentVariants[0],"adjacentVariants",n,s)),n?e:{}}function T(e,s,r,n){var l;let i=r;if(n&&!((l=e.product)!=null&&l.handle)&&(i=O(`${s}.product.handle`)),e.selectedOptions){const a=e.selectedOptions[0];a!=null&&a.name||(i=O(`${s}.selectedOptions.name`)),a!=null&&a.value||(i=O(`${s}.selectedOptions.value`))}else i=O(`${s}.selectedOptions`);return i}function he(e){const s=G(e);if(!s.options)return[];const r={};s.options.map(l=>{var i;(i=l.optionValues)==null||i.map(a=>{if(a.firstSelectableVariant){const o=$(a.firstSelectableVariant.selectedOptions);r[o]=a.firstSelectableVariant}})}),s.adjacentVariants.map(l=>{const i=$(l.selectedOptions);r[i]=l});const n=s.selectedOrFirstAvailableVariant;if(n){const l=$(n.selectedOptions);r[l]=n}return Object.values(r)}function me(e){const s=G(e,!0);if(!s.options)return[];const{options:r,selectedOrFirstAvailableVariant:n,adjacentVariants:l,encodedVariantExistence:i,encodedVariantAvailability:a,handle:o}=s,d=n==null?void 0:n.selectedOptions.map(p=>p.name),c=r.filter(p=>d&&d.indexOf(p.name)>=0),f=de(r),h=pe(n?[n,...l]:l),m=_(n?n.selectedOptions:[]);return c.map((p,j)=>({...p,optionValues:p.optionValues.map(P=>{var N;const b={...m};b[p.name]=P.name;const C=X(b||[]),S=ue(b||[],f).slice(0,j+1),y=z(S,i||""),x=z(S,a||""),v=h[C]||P.firstSelectableVariant;let w={};v&&(w=_(v.selectedOptions||[]));const R=new URLSearchParams(w),A=((N=v==null?void 0:v.product)==null?void 0:N.handle)||o;return{...P,variant:v,handle:A,variantUriQuery:R.toString(),selected:m[p.name]===P.name,exists:y,available:x,isDifferentProduct:A!==o}})}))}function xe(e){return u.useEffect(()=>{const s=new URLSearchParams(_(e||[])),r=new URLSearchParams(window.location.search),n=new URLSearchParams({...Object.fromEntries(r),...Object.fromEntries(s)});n.size>0&&window.history.replaceState({},"",`${window.location.pathname}?${n.toString()}`)},[JSON.stringify(e)]),null}class ge extends u.Component{getSnapshotBeforeUpdate(s){const r=this.props.childRef.current;if(r&&s.isPresent&&!this.props.isPresent){const n=r.offsetParent,l=ne(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=l-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function je({children:e,isPresent:s,anchorX:r,root:n}){const l=u.useId(),i=u.useRef(null),a=u.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=u.useContext(te);return u.useInsertionEffect(()=>{const{width:d,height:c,top:f,left:h,right:m}=a.current;if(s||!i.current||!d||!c)return;const g=r==="left"?`left: ${h}`:`right: ${m}`;i.current.dataset.motionPopId=l;const p=document.createElement("style");o&&(p.nonce=o);const j=n??document.head;return j.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${f}px !important;
          }
        `),()=>{j.removeChild(p),j.contains(p)&&j.removeChild(p)}},[s]),t.jsx(ge,{isPresent:s,childRef:i,sizeRef:a,children:u.cloneElement(e,{ref:i})})}const ye=({children:e,initial:s,isPresent:r,onExitComplete:n,custom:l,presenceAffectsLayout:i,mode:a,anchorX:o,root:d})=>{const c=H(ve),f=u.useId();let h=!0,m=u.useMemo(()=>(h=!1,{id:f,initial:s,isPresent:r,custom:l,onExitComplete:g=>{c.set(g,!0);for(const p of c.values())if(!p)return;n&&n()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[r,c,n]);return i&&h&&(m={...m}),u.useMemo(()=>{c.forEach((g,p)=>c.set(p,!1))},[r]),u.useEffect(()=>{!r&&!c.size&&n&&n()},[r]),a==="popLayout"&&(e=t.jsx(je,{isPresent:r,anchorX:o,root:d,children:e})),t.jsx(se.Provider,{value:m,children:e})};function ve(){return new Map}const k=e=>e.key||"";function F(e){const s=[];return u.Children.forEach(e,r=>{u.isValidElement(r)&&s.push(r)}),s}const be=({children:e,custom:s,initial:r=!0,onExitComplete:n,presenceAffectsLayout:l=!0,mode:i="sync",propagate:a=!1,anchorX:o="left",root:d})=>{const[c,f]=re(a),h=u.useMemo(()=>F(e),[e]),m=a&&!c?[]:h.map(k),g=u.useRef(!0),p=u.useRef(h),j=H(()=>new Map),[P,N]=u.useState(h),[b,C]=u.useState(h);ie(()=>{g.current=!1,p.current=h;for(let y=0;y<b.length;y++){const x=k(b[y]);m.includes(x)?j.delete(x):j.get(x)!==!0&&j.set(x,!1)}},[b,m.length,m.join("-")]);const V=[];if(h!==P){let y=[...h];for(let x=0;x<b.length;x++){const v=b[x],w=k(v);m.includes(w)||(y.splice(x,0,v),V.push(v))}return i==="wait"&&V.length&&(y=V),C(F(y)),N(h),null}const{forceRender:S}=u.useContext(oe);return t.jsx(t.Fragment,{children:b.map(y=>{const x=k(y),v=a&&!c?!1:h===b||m.includes(x),w=()=>{if(j.has(x))j.set(x,!0);else return;let R=!0;j.forEach(A=>{A||(R=!1)}),R&&(S==null||S(),C(p.current),a&&(f==null||f()),n&&n())};return t.jsx(ye,{isPresent:v,initial:!g.current||r?void 0:!1,custom:s,presenceAffectsLayout:l,mode:i,root:d,onExitComplete:v?void 0:w,anchorX:o,children:y},x)})})};function Oe({images:e,selectedVariantImage:s}){let r=e||[];if(s){const d={url:s.url,altText:s.altText};r.find(c=>c.url===s.url)?r=[d,...r.filter(c=>c.url!==s.url)]:r=[d,...r]}const[n,l]=u.useState(0),[i,a]=u.useState(!1),o=r[n];return u.useEffect(()=>{const d=r[0];if(!d)return;const c=document.createElement("link");return c.rel="preload",c.as="image",c.href=d.url,document.head.appendChild(c),()=>{document.head.removeChild(c)}},[r]),u.useEffect(()=>{if(!i)return;const d=c=>{c.key==="ArrowLeft"?l(f=>(f-1+r.length)%r.length):c.key==="ArrowRight"?l(f=>(f+1)%r.length):c.key==="Escape"&&a(!1)};return window.addEventListener("keydown",d),document.body.style.overflow="hidden",()=>{window.removeEventListener("keydown",d),document.body.style.overflow=""}},[i,r.length]),t.jsxs("div",{className:"product-gallery",children:[o&&t.jsx(be,{mode:"wait",children:t.jsx(I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"w-full",children:t.jsx(M,{data:o,className:"gallery-main-image",loading:"eager",width:800,height:800,sizes:"(min-width: 1024px) 600px, (min-width: 640px) 60vw, 100vw",fetchPriority:"high",onClick:()=>a(!0),style:{cursor:"zoom-in"}})},o.url)}),t.jsx("div",{className:"gallery-thumbnails",children:r.map((d,c)=>t.jsx("button",{type:"button",className:`gallery-thumbnail ${c===n?"active":""}`,onClick:()=>l(c),children:t.jsx(M,{data:d,width:60,height:60,loading:"lazy"})},d.url))}),i&&t.jsxs("div",{className:"lightbox-overlay",role:"button",tabIndex:0,onClick:()=>a(!1),onKeyDown:d=>{(d.key==="Enter"||d.key===" ")&&a(!1)},children:[t.jsx("button",{className:"lightbox-prev",type:"button",onClick:d=>{d.stopPropagation(),l(c=>(c-1+r.length)%r.length)},children:"❮"}),t.jsx("img",{src:r[n].url,alt:r[n].altText||""}),t.jsx("button",{className:"lightbox-next",type:"button",onClick:d=>{d.stopPropagation(),l(c=>(c+1)%r.length)},children:"❯"})]})]})}function Pe({productOptions:e,selectedVariant:s}){const r=W();return t.jsx("div",{className:"product-form",children:e.map(n=>n.optionValues.length===1?null:t.jsxs("div",{className:"product-options",children:[t.jsx("h5",{children:n.name}),t.jsx("div",{className:"product-options-grid",children:n.optionValues.map(l=>{const{name:i,handle:a,variantUriQuery:o,selected:d,available:c,exists:f,isDifferentProduct:h,swatch:m}=l;return h?t.jsx(B,{className:`product-options-item${d?" selected":""}`,prefetch:"intent",preventScrollReset:!0,replace:!0,to:`/products/${a}?${o}`,style:{border:d?"1px solid black":"1px solid transparent",opacity:c?1:.3},children:t.jsx(K,{swatch:m,name:i})},n.name+i):t.jsx("button",{type:"button",className:`product-options-item${f&&!d?" link":""}${d?" selected":""}`,style:{border:d?"1px solid #d4af37":"1px solid transparent",opacity:c?1:.3},disabled:!f,onClick:()=>{d||r(`?${o}`,{replace:!0,preventScrollReset:!0})},children:t.jsx(K,{swatch:m,name:i})},n.name+i)})}),t.jsx("br",{})]},n.name))})}function K({swatch:e,name:s}){var l,i;const r=(i=(l=e==null?void 0:e.image)==null?void 0:l.previewImage)==null?void 0:i.url,n=e==null?void 0:e.color;return!r&&!n?s:t.jsx("div",{"aria-label":s,className:"product-option-label-swatch",style:{backgroundColor:n||"transparent"},children:!!r&&t.jsx("img",{src:r,alt:s})})}function Se(){const e=u.useRef(null);return u.useEffect(()=>{function s(r){var l,i;const n=r.target;if(n&&n.closest('a[href="#size-modal"]')){r.preventDefault(),(l=e.current)==null||l.showModal();const a=(i=e.current)==null?void 0:i.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');a==null||a.focus()}}return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]),u.useEffect(()=>{var r;function s(n){const l=e.current;if(!l||n.key!=="Tab"||!l.open)return;const i=l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!i.length)return;const a=i[0],o=i[i.length-1];n.shiftKey?document.activeElement===a&&(n.preventDefault(),o.focus()):document.activeElement===o&&(n.preventDefault(),a.focus())}return(r=e.current)==null||r.addEventListener("keydown",s),()=>{var n;return(n=e.current)==null?void 0:n.removeEventListener("keydown",s)}},[]),t.jsxs("dialog",{id:"size-modal",ref:e,"aria-labelledby":"size-modal-title",children:[t.jsx("button",{className:"close","aria-label":"Close",onClick:()=>{var s;return(s=e.current)==null?void 0:s.close()},children:"✕"}),t.jsx("h2",{id:"size-modal-title",className:"font-['Playfair_Display'] text-[20px] mb-4",children:"Size Guide"}),t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Size"}),t.jsx("th",{children:"Bust"}),t.jsx("th",{children:"Waist"}),t.jsx("th",{children:"Hip"})]})}),t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"XS"}),t.jsx("td",{children:'32"'}),t.jsx("td",{children:'24"'}),t.jsx("td",{children:'34"'})]}),t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"S"}),t.jsx("td",{children:'34"'}),t.jsx("td",{children:'26"'}),t.jsx("td",{children:'36"'})]}),t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"M"}),t.jsx("td",{children:'36"'}),t.jsx("td",{children:'28"'}),t.jsx("td",{children:'38"'})]}),t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"L"}),t.jsx("td",{children:'38"'}),t.jsx("td",{children:'30"'}),t.jsx("td",{children:'40"'})]}),t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"XL"}),t.jsx("td",{children:'40"'}),t.jsx("td",{children:'32"'}),t.jsx("td",{children:'42"'})]}),t.jsxs("tr",{children:[t.jsx("th",{scope:"row",children:"XXL"}),t.jsx("td",{children:'42"'}),t.jsx("td",{children:'34"'}),t.jsx("td",{children:'44"'})]})]})]})]})}function we({initialRating:e=0}){const[s,r]=u.useState(Math.round(e)),[n,l]=u.useState(0),i=[1,2,3,4,5];return t.jsx("div",{className:"flex items-center","aria-label":`${s} out of 5 stars`,children:i.map(a=>t.jsx(I.span,{className:`cursor-pointer text-2xl ${(n||s)>=a?"text-[#FFD700]":"text-gray-300"}`,onMouseEnter:()=>l(a),onMouseLeave:()=>l(0),onClick:()=>r(a),whileHover:{scale:1.2},whileTap:{scale:.9},children:"★"},a))})}function Ee({analytics:e,children:s,disabled:r,lines:n,onClick:l,className:i}){return t.jsx(D,{route:"/cart",inputs:{lines:n},action:D.ACTIONS.LinesAdd,children:a=>t.jsxs(t.Fragment,{children:[t.jsx("input",{name:"analytics",type:"hidden",value:JSON.stringify(e)}),t.jsx(I.button,{type:"submit",onClick:l,disabled:r??a.state!=="idle",className:i,whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:s})]})})}const Le=({data:e})=>[{title:`Hydrogen | ${(e==null?void 0:e.product.title)??""}`},{rel:"canonical",href:`/products/${e==null?void 0:e.product.handle}`}],$e=q(function(){var g;const{product:s}=J(),{open:r}=Z(),[n,l]=u.useState(1),[i,a]=u.useState(!1),o=Q(s.selectedOrFirstAvailableVariant,he(s));xe(o.selectedOptions);const d=me({...s,selectedOrFirstAvailableVariant:o}),c=!o||n<1||!o.availableForSale;function f(){a(!0),r("cart"),setTimeout(()=>a(!1),800)}const{title:h,descriptionHtml:m}=s;return t.jsxs(I.div,{className:"product product-page-bg rounded-lg shadow-lg animate-fade-in-scale",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[t.jsx(Oe,{images:((g=s.images)==null?void 0:g.nodes)||[],selectedVariantImage:o==null?void 0:o.image}),t.jsxs("div",{className:"product-main",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h1",{className:"tracking-wide",children:h}),t.jsx(we,{initialRating:4.8})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(ee,{price:o==null?void 0:o.price,compareAtPrice:o==null?void 0:o.compareAtPrice}),t.jsx(Pe,{productOptions:d,selectedVariant:o}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex items-center border border-[#d4af37] rounded",children:[t.jsx("button",{type:"button",className:"px-3",onClick:()=>l(Math.max(1,n-1)),children:"-"}),t.jsx("span",{className:"px-3 w-6 text-center",children:n}),t.jsx("button",{type:"button",className:"px-3",onClick:()=>l(n+1),children:"+"})]}),t.jsx(Ee,{disabled:c,onClick:f,className:`w-full py-4 px-8 rounded-full font-bold flex items-center justify-center gap-2 transition-colors duration-300 ${i?"bg-green-600 text-white":"bg-gradient-to-r from-[#d4af37] via-[#f5e18a] to-[#d4af37] text-[#4b3621] hover:opacity-90"}`,lines:o?[{merchandiseId:o.id,quantity:n,selectedVariant:o}]:[],children:i?"Added":"Add to Cart"})]}),t.jsx("p",{className:"mt-1",children:t.jsx("a",{href:"#size-modal",className:"underline text-sm",children:"View Size Guide"})})]}),t.jsx("div",{className:"mt-2 space-y-1",children:t.jsxs("details",{open:!0,className:"border-t pt-4",children:[t.jsx("summary",{className:"font-bold flex items-center gap-2 cursor-pointer",children:"Description"}),t.jsx("div",{className:"mt-2 text-sm leading-relaxed tracking-wide",dangerouslySetInnerHTML:{__html:m}})]})})]}),t.jsx(Y.ProductView,{data:{products:[{id:s.id,title:s.title,price:(o==null?void 0:o.price.amount)||"0",vendor:s.vendor,variantId:(o==null?void 0:o.id)||"",variantTitle:(o==null?void 0:o.title)||"",quantity:1}]}}),t.jsx(Se,{}),t.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:'{"@context":"https://schema.org","@type":"Product","name":"Limelight Yarn-Dyed Embroidered Shirt","image":["url1.jpg","url2.jpg"],"description":"Elevate your look with handcrafted pearl-studded yarn-dyed cotton…","sku":"LIME123","brand":{"@type":"Brand","name":"Limelight"},"offers":{"@type":"Offer","price":"24.99","priceCurrency":"USD","availability":"https://schema.org/InStock"},"aggregateRating":{"@type":"AggregateRating","ratingValue":"4.8","reviewCount":"324"}}'}})]})});export{$e as default,Le as meta};
